{{ with .IsNamedParams }}
  {{ $videoID := $.Get "video_id" }}
  {{ $title := $.Get "title" | default "嵌入式音乐播放器" }}

  {{ if $videoID }}
    <div class="music-player-container">
      <h4 class="player-title">{{ $title }}</h4>
      <iframe 
        width="100%" 
        height="315" 
        src="https://www.youtube-nocookie.com/embed/{{ $videoID }}?rel=0" 
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
        allowfullscreen
        title="{{ $title }}">
      </iframe>
      <p class="player-note">（Source: YouTube / YouTube Music）</p>
    </div>
  {{ else }}
    {{/* 如果缺少 video_id，显示纯文本错误提示 */}}
    <div style="color: red; padding: 10px; border: 1px dashed red;">
        Error: ytmusic shortcode requires 'video_id' parameter.
    </div>
  {{ end }}
{{ else }}
  {{/* 如果参数格式错误，显示纯文本错误提示 */}}
  <div style="color: red; padding: 10px; border: 1px dashed red;">
      Error: ytmusic shortcode requires named parameters (e.g., {{</* ytmusic video_id="ID" */>}}).
  </div>
{{ end }}